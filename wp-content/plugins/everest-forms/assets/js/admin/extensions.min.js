!function(n,i){var d=n(document);i.updates.installExtension=function(e){var a=n(".plugin-card-"+e.slug),s=a.find(".install-now, .activate-now");return e=_.extend({success:i.updates.installExtensionSuccess,error:i.updates.installExtensionError},e),s.html()!==i.updates.l10n.installing&&s.data("originaltext",s.html()),s.addClass("updating-message").attr("aria-label",i.updates.l10n.pluginInstallingLabel.replace("%s",s.data("name"))).text(i.updates.l10n.installing),i.a11y.speak(i.updates.l10n.installingMsg,"polite"),a.removeClass("plugin-card-install-failed").find(".notice.notice-error").remove(),d.trigger("wp-extension-installing",e),i.updates.ajax("everest_forms_install_extension",e)},i.updates.installExtensionSuccess=function(e){var a,s;"everest-forms_page_evf-builder"===pagenow?(n('tr[data-slug="'+e.slug+'"]').removeClass("install").addClass("installed").find(".plugin-status span").removeClass("updating-message install-now").addClass("updated-message active").attr("aria-label",i.updates.l10n.pluginInstalledLabel.replace("%s",e.pluginName)).text(i.updates.l10n.pluginInstalled),i.a11y.speak(i.updates.l10n.installedMsg,"polite"),d.trigger("wp-plugin-bulk-install-success",e)):(a=n(".plugin-card-"+e.slug).find(".install-now"),s=n(".plugin-card-"+e.slug).find(".status-label"),a.removeClass("updating-message").addClass("updated-message installed button-disabled").attr("aria-label",i.updates.l10n.pluginInstalledLabel.replace("%s",e.pluginName)).text(i.updates.l10n.pluginInstalled),i.a11y.speak(i.updates.l10n.installedMsg,"polite"),d.trigger("wp-plugin-install-success",e),e.activateUrl&&setTimeout(function(){s.removeClass("status-install-now").addClass("status-active").text(i.updates.l10n.pluginInstalled),a.removeClass("install-now installed button-disabled updated-message").addClass("activate-now button-primary").attr("href",e.activateUrl).attr("aria-label",i.updates.l10n.activatePluginLabel.replace("%s",e.pluginName)).text(i.updates.l10n.activatePlugin)},1e3))},i.updates.installExtensionError=function(e){var a,s,l,t;"everest-forms_page_evf-builder"===pagenow?(a=(l=n('tr[data-slug="'+e.slug+'"]')).find(".plugin-status span"),i.updates.isValidResponse(e,"install")&&(i.updates.maybeHandleCredentialError(e,"install-plugin")||(t=i.updates.l10n.installFailed.replace("%s",e.errorMessage),a.removeClass("updating-message").addClass("updated-message").attr("aria-label",i.updates.l10n.pluginInstallFailedLabel.replace("%s",l.data("name"))).text(i.updates.l10n.installFailedShort),i.a11y.speak(t,"assertive"),d.trigger("wp-plugin-bulk-install-error",e)))):(l=(s=n(".plugin-card-"+e.slug)).find(".install-now"),i.updates.isValidResponse(e,"install")&&(i.updates.maybeHandleCredentialError(e,"everest_forms_install_extension")||(t=i.updates.l10n.installFailed.replace("%s",e.errorMessage),s.addClass("plugin-card-update-failed").append('<div class="notice notice-error notice-alt is-dismissible"><p>'+t+"</p></div>"),s.on("click",".notice.is-dismissible .notice-dismiss",function(){setTimeout(function(){s.removeClass("plugin-card-update-failed").find(".column-name a").focus()},200)}),l.removeClass("updating-message").addClass("button-disabled").attr("aria-label",i.updates.l10n.pluginInstallFailedLabel.replace("%s",l.data("name"))).text(i.updates.l10n.installFailedShort),i.a11y.speak(t,"assertive"),d.trigger("wp-plugin-install-error",e))))},i.updates.queueChecker=function(){var e;!i.updates.ajaxLocked&&i.updates.queue.length&&("everest_forms_install_extension"===(e=i.updates.queue.shift()).action&&i.updates.installExtension(e.data),d.trigger("wp-updates-queue-job",e))},n(function(){n("#extension-filter").on("click",".extension-install .install-now",function(e){var a=n(e.target),s=n(this).data("name");e.preventDefault(),a.hasClass("updating-message")||a.hasClass("button-disabled")||(i.updates.shouldRequestFilesystemCredentials&&!i.updates.ajaxLocked&&(i.updates.requestFilesystemCredentials(e),d.on("credential-modal-cancel",function(){n(".install-now.updating-message").removeClass("updating-message").text(i.updates.l10n.installNow).attr("aria-label",i.updates.l10n.pluginInstallNowLabel.replace("%s",s)),i.a11y.speak(i.updates.l10n.updateCancel,"polite")})),i.updates.installExtension({name:s,slug:a.data("slug")}))})})}(jQuery,window.wp);